pm.sendRequest({
    url: "https://restful-booker.herokuapp.com/booking",
    method: "POST",
    header: {
        "Content-Type": "application/json"
    },
    body: {
        mode: "raw",
        raw: JSON.stringify({
             "firstname" : "Eslam",
              "lastname" : "Roshdy",
             "totalprice" : 300,
             "depositpaid" : false,
                "bookingdates" : {
                     "checkin" : "2025-10-25",
                    "checkout" : "2025-10-30"
                },
    "additionalneeds" : "cup of Tea"
        })
    }
}, (err, res) => {
    if (err) {
        console.log(" Error Creating Booking:", err);
        return;
    }

    let bookingData = res.json();
    pm.environment.set("partial_update_bookingid", bookingData.bookingid);

     pm.visualizer.set(`
        <h2 style="color:green;">Booking Created Before Partial Update (no token -tev scenario)</h2>
            <p style="color:white;"><strong style="color:red;">Partial Update Booking ID:</strong> ${bookingData.bookingid}</p>
        <p style="color:white;"><strong style="color:red;">Name:</strong> ${bookingData.booking.firstname} ${bookingData.booking.lastname}</p>
        <p style="color:white;"><strong style="color:red;">Total Price:</strong> ${bookingData.booking.totalprice}</p>
        <p style="color:white;"><strong style="color:red;">Check-in:</strong> ${bookingData.booking.bookingdates.checkin}</p>
        <p style="color:white;"><strong style="color:red;">Check-out:</strong> ${bookingData.booking.bookingdates.checkout}</p>
        <p style="color:white;"><strong style="color:red;">Additional Needs:</strong> ${bookingData.booking.additionalneeds}</p>
    `);
    console.log(" Booking created successfully! ID:", bookingData.bookingid);
});
